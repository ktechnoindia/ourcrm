<!-- <ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-item lines="none">
      <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
      <ion-title>Lead Follow Up</ion-title>
    </ion-item>
  </ion-toolbar>
</ion-header> -->

<ion-content >
  <div class="Customer">
    <div>
      <ion-card-content>
        <div class="dekstop-menu">
          <ion-card-header>
            <ion-row lines="none">
              <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
              <ion-title style="text-align: center;">Lead Follow-Up Window</ion-title>
            </ion-row>
          </ion-card-header>
        </div>
        <form [formGroup]="myform" (ngSubmit)="onSubmit()">
          <ion-row>
            <ion-col size="12" size-lg="5" size-md="5" size-sm="6">
              <ion-card style="height: 500px;">
                <ion-searchbar class="custom" formControlName="searchTerm" showCancelButton="focus"
                  [(ngModel)]="searchTerm" (ionInput)="onSearchTermChanged()"></ion-searchbar>
                <ion-row style="padding: 10px;">
                  <div class="scroll-container" style="height: 360px;">

                    <table style="width: 100%;overflow-x:auto;overflow-y: auto;">
                      <tr>
                        <!-- <th>Sr.No.</th> -->
                        <th >Lead ID</th>
                        <th>Lead Date</th>
                        <th>Company Name</th>

                        <!-- <th>Contact Person</th> -->
                        <th>Mobile No.</th>
                        <!-- <th>Country</th>
                        <th>State</th>
                        <th>City </th> -->
                        <!-- <th>Address</th> -->
                        <!-- <th>Pincode</th>
                        <th>Email ID</th> -->
                        <th>Select Product</th>
                        <!-- <th>Lead Source</th>-->

                        <!-- <th>Lead Score</th> -->
                        <th>Lead Owner</th>
                        <!-- <th>Remark</th>   -->
                      </tr>
                      <tr (click)="showDetails(leadscore)"
                        *ngFor="let leadscore of filteredFollowups$ | async; let i = index">
                        <!-- <td>{{i+1}}</td> -->
                        <td>{{leadscore.tid}}</td>
                        <td>{{leadscore.crdate | date:'dd/MM/YYYY'}}</td>
                        <td>{{leadscore.companyname}}</td>

                        <!-- <td>{{leadscore.catPerson}}</td> -->
                        <td>{{leadscore.phone}}</td>
                        <!-- <td>{{leadscore.selectedCountry}}</td>
                          <td>{{leadscore.selectedState}}</td>
                          <td>{{leadscore.selectedDistrict}}</td> -->
                        <!-- <td> {{leadscore.fulladdress}}</td> -->
                        <!-- <td>{{leadscore.pncode}}</td> -->
                        <!-- <td>{{leadscore.emails}}</td>-->
                        <!-- <td>{{leadscore.lscore}}</td> -->
                        <!-- <td>{{leadscore.lscore}}</td> -->
                        <td>{{leadscore.selectpd}}</td>
                        <td>{{leadscore.executivename}}</td>

                        <!-- <td>{{leadscore.rmark}}</td>  -->

                      </tr>

                    </table>
                  </div>
                </ion-row>
              </ion-card>
            </ion-col>

            <ion-col class="followuplist" size="12" size-lg="7" size-md="7" size-sm="6">
              <ion-card style="height: 500px;padding: 5px;">
                <ion-row class="headinglabel">
                  <ion-label>List Of Follow-Up :</ion-label>
                </ion-row>
                <!-- <ion-item class="compname">
                  <ion-label>Company Name :</ion-label>
                  <div  *ngIf="selectedRow" color="dark" label-placement="floating" fill="outline" name="companyname"
                    label="Company Name">{{selectedRow.companyname}}</div>
                </ion-item> -->
                <div  *ngIf="selectedRow" class="compname" >
                  <ion-label>Company Name</ion-label>
                  <p>{{selectedRow.companyname}}</p>
                </div>

                <div style="padding: 10px;">
                  <ion-row style="overflow-x:auto;">
                    <div class="scroll-container" style="border: 1px solid grey;">
                      <table style="overflow-x:auto; width: 100%;">
                        <!-- <tr>
                          <th >
                            Company Name
                          </th>
                          <td  *ngIf="selectedRow">
                            {{selectedRow.companyname}}
                          </td>
                          <th >
                            Lead Id
                          </th>
                          <td  *ngIf="selectedRow">{{selectedRow.tid}}</td>
                        
                        </tr> -->
                        <tr>
                          <th >SR. No.</th>
                          <th>Date</th>
                          <th>Remark</th>
                          <!-- <th>followupId</th> -->
                          <!-- <th style="width: 80px;">Company Name</th> -->
                          <!-- <th style="width: 75px !important;">Lead Id</th>
                          <th style="width: 80px;">Company Name</th>
                          <th style="width: 80px;">Lead Date</th> -->
                          <!-- <th style="width: 80px;">Product</th> -->
                          <!-- <th style="width: 80px;">Phone</th> -->
                          <!-- <th>Address</th> -->
                          <!-- <th style="width: 70px;">Entered By</th> -->
                          <th>Next Follow-Up</th>
                          <th>Update By</th>
                        </tr>
                        <ng-container *ngIf="selectedRow">
                          <!-- <ng-container  *ngFor="let follow of lead$; let i = index"> -->
                          <tr (click)="selectFollowup(followup)" *ngFor="let followup of followups; let i = index">
                            <td>{{i+1}}</td>
                            <td>{{followup.followupdate}}</td>
                            <td>{{followup.remark}}</td>
                            <!-- <td>{{selectedRow.srNo}}</td> -->
                            <!-- <td>{{selectedRow.tid}}</td>
                            <td>{{selectedRow.companyname}}</td>
                            <td>{{selectedRow.crdate}}</td> -->
                            <!-- <td>{{selectedRow.executivename}}</td> -->
                            <!-- <td>{{selectedRow.phone}}</td> -->
                            <!-- <td>{{selectedRow.fulladdress}}</td> -->
                            <!-- <td>{{selectedRow.selectpd}}</td> -->
                            <td>{{followup.nextfollowupDate}}</td>
                            <td>{{followup.enterdby}}</td>

                          </tr>
                          <!-- </ng-container> -->
                        </ng-container>
                      </table>
                    </div>
                  </ion-row>
                </div>

                <div>
                  <ion-row style="padding:0px 10px;">
                    <ion-col size="6" size-lg="4" size-md="4" size-sm="4">
                      <ion-row>
                        <ion-input [(ngModel)]="nextfollowupDate" formControlName="nextfollowupDate"
                          name="nextfollowupDate" type="date" label="Next Follow-Up Date :" label-placement="floating"
                          fill="outline"></ion-input>
                        <ion-input [(ngModel)]="lid" formControlName="lid" name="lid" type="hidden"></ion-input>
                      </ion-row>
                    </ion-col>
                    <ion-col size="6" size-lg="8" size-md="8" size-sm="8">
                      <ion-textarea  [(ngModel)]="remark" formControlName="remark" label-placement="floating"
                        fill="outline" name="remark" type="text" label="Remark :"></ion-textarea>
                    </ion-col>
                  </ion-row>
                  <ion-row class="custom-primary" style="justify-content: right;padding: 10px;">
                    <ion-button id="open-loading">New</ion-button>       
                    <ion-button type="submit" id="open-loading1">Save</ion-button>                    
                  </ion-row>
                  <ion-input  formControlName="followupdate"  name="followupdate"  type="hidden" [(ngModel)]="followupdate"></ion-input>

                </div>
              </ion-card>
            </ion-col>
          </ion-row>
        </form>
      </ion-card-content>
    </div>
  </div>
</ion-content>