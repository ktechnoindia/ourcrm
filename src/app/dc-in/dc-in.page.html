<!-- <ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-item lines="none">
      <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
      <ion-title>DC-IN Window</ion-title>
    </ion-item>
  </ion-toolbar>
</ion-header> -->

<ion-content>
  <div class="Customer">
    <ion-card>
      <ion-card-content>
        <div class="dekstop-menu">
          <ion-card-header>
            <ion-row lines="none">
              <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
              <ion-title style="text-align: center;">DC-IN Window</ion-title>
              <div class="custom-primary">
                <ion-button size="small" [routerLink]="['/dc-in-report']" id="open-loading5">View DC-IN</ion-button>
                <ion-loading class="custom-loading" trigger="open-loading5" message="DC-IN Showing ..."
                  [duration]="1000"></ion-loading>
              </div>
            </ion-row>
          </ion-card-header>
        </div>
        <ion-grid>

          <form  [formGroup]="myform"  (ngSubmit)="onSubmit(dcinData)">

            <ion-row>
              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <select class="select" [(ngModel)]="voucherformat"  formControlName="voucherformat"  name="voucherformat">
                  <option value="0" disabled selected>Voucher Formate</option> <!-- Default option -->
                  <option value="1">1</option>
                  <option value="2">2</option>
                </select>
              </ion-col>
              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <ion-row>
                  <ion-input [(ngModel)]="voucherNumber"  formControlName="voucherNumber"  name="vouchno" type="text" label="Voucher No. :"
                    label-placement="floating" fill="outline"></ion-input>

                </ion-row>
              </ion-col>
              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <ion-row>
                  <ion-input [(ngModel)]="datetype"  formControlName="datetype"  name="date" type="datetime" label="Voucher Date :"
                    label-placement="floating" fill="outline"></ion-input>

                </ion-row>
              </ion-col>
              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <ion-row>
                  <ion-input color="dark" [(ngModel)]="vendcode"  formControlName="vendcode"  name="vendcode" type="text" label="Code :"
                    label-placement="floating" fill="outline"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col size-lg="3" size-md="2" size-sm="6" size="6">
            
                <select class="select" [(ngModel)]="suppliertype"  formControlName="suppliertype"  name="supplier">
                  <option value="0">Supplier Name</option><!-- Default option -->
                  <option *ngFor="let suppliername of supplier$ | async" [value]="suppliername.id">
                    {{ suppliername.name }}
                  </option>
                </select>
              </ion-col>

              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <ion-input [(ngModel)]="referenceNumber"  formControlName="referenceNumber"  name="refernceNumber" type="text" label="Refrence No. :"
                  label-placement="floating" fill="outline">
                </ion-input>

              </ion-col>

              <ion-col size-lg="1.5" size-md="2" size-sm="6" size="6">
                <ion-row>
                  <ion-input [(ngModel)]="refdate"  formControlName="refdate"  name="refdate" type="datetime" label=" Reference Date :"
                    label-placement="floating" fill="outline"></ion-input>
                </ion-row>
              </ion-col>

              <!-- <ion-col size-lg="1.5" size-md="4" size-sm="6" size="6">
                <ion-row>
                  <ion-input [(ngModel)]="ponumber"  formControlName="ponumber"  name="ponumber" type="text" label="PO Number :"
                    label-placement="floating" fill="outline"></ion-input>
                </ion-row>

              </ion-col> -->
            </ion-row>


            <ion-row style="margin-top: 10px;">
              <div class="scroll-container">
                <table style="width:1755px;overflow-x:auto;">
                  <tr>
                    <th style="width: 50px !important;">Sr.No.</th>
                    <th style="width: 100px !important;">BarCode</th>
                    <th style="width: 70px !important;">Item Code</th>
                    <th style="width: 150px !important;">Item Name</th>
                    <th style="width: 120px !important;">Description</th>
                    <th style="width: 50px !important;">Quantity</th>
                    <th style="width: 70px !important;">Unit</th>
                    <th style="width: 50px !important;">MRP</th>
                    <th style="width: 70px !important;">Basic Rate</th>
                    <th style="width: 70px !important;">Net Rate</th>
                    <th style="width: 100px !important;">Gross Amount</th>
                    <th style="width: 50px !important;">GST</th>
                    <th style="width: 50px !important;">CGST</th>
                    <th style="width: 50px !important;">SGST</th>
                    <th style="width: 50px !important;">IGST</th>
                    <th style="width: 70px !important;">Discount %</th>
                    <th style="width: 100px !important;">Discount Amount</th>
                    <th style="width: 70px !important;">Tax Amount</th>
                    <th style="width: 70px !important;">Net Amount</th>
                    <th style="width: 70px !important;">Action</th>
                  </tr>
                  <tr *ngFor="let dcin of dcinData; let i = index">
                    <td>{{i+1}}</td>
                    <td>
                      <input [(ngModel)]="dcin.barcode" formControlName="barcode"  name="barcode" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.itemcode" formControlName="itemcode"  name="itemcode" class="table_input" type="text">
                    </td>
                    <td>
                    
                      <select class="select-option" style="width: 100px;outline: none;border: none;"  [(ngModel)]=" itemname" name="itemname" formControlName="itemname">
                        <option value="0">Item Name</option><!-- Default option -->
                        <option *ngFor="let itemname of itemnames$ | async" [value]="itemname.tid">
                          {{ itemname.itemDesc }}
                        </option>
                      </select>
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.description" formControlName="description"  name="description" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.quantity" formControlName="quantity"  name="quantity" class="table_input" type="number">

                    </td>
                    <td class="select-option">
                      <select  [(ngModel)]="unitname" formControlName="unitname"  name="unit_name" >
                        <option value="0">Unit Name</option>
                        <option *ngFor="let unitname of unitname$ | async" [value]="unitname.unitid">
                          {{ unitname.unitname }}
                        </option>
                      </select>                    </td>
                    <td>
                      <input [(ngModel)]="dcin.mrp" formControlName="mrp"  name="mrp" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.basicrate" formControlName="basicrate"  name="basicrate" class="table_input" type="number">

                    </td>
                    <td>
                      <input [(ngModel)]="dcin.netrate" formControlName="netrate"  name="netrate" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.grossrate" formControlName="grossrate"  name="grossrate" class="table_input" type="number">
                    </td>
                    <td class="select-option">
                      <select interface="popover" [(ngModel)]="dcin.taxrate" formControlName="taxrate"  name="taxrate" id="taxrate">
                        <option value="0">Select GST</option>
                        <!-- Default option with value 0 -->
                        <option *ngFor="let gsttype of taxrate$ | async" [value]="gsttype.gstid">
                          {{ gsttype.gstname }}
                        </option>
                      </select>
                    </td>

                    <td>
                      <input [(ngModel)]="dcin.CGST" formControlName="CGST"  name="CGST" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.SGST" formControlName="SGST" name="SGST" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.IGST" formControlName="IGST" name="IGST" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.discount" formControlName="discount" name="discount" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.discountamt" formControlName="discountamt" name="discountamt" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.totaltax" formControlName="totaltax" name="totaltax" class="table_input" type="text">
                    </td>
                    <td>
                      <input [(ngModel)]="dcin.total" formControlName="total" name="total" class="table_input" type="text">

                    </td>

                    <td>
                      <ion-icon icon-only clear color="primary" name="add" (click)="addDcin()"></ion-icon>
                      <ion-icon *ngIf="i>0" icon-only clear color="danger" name="trash"
                        (click)="removeDcin(i,dcin)"></ion-icon>
                    </td>
                  </tr>
                </table>
              </div>
              <div style="overflow-x: auto;" >
                <table style="width:100%;" >
                  <tr>
  
                    <td colspan="1" >
                      <label class="label_table" for="">Total Item :</label>
                      <input name="totalitemno" [(ngModel)]="totalitemno"   formControlName="totalitemno" class="input_table" type="text" >
                    </td>
  
                    <td colspan="5">
                      <label class="label_table" for="">Qty :</label>
                      <input name="totalquantity" [(ngModel)]="totalquantity"  formControlName="totalquantity"  class="input_table" type="text">
                    </td>
  
                    <td colspan="10">
                      <label class="label_table" for="">Gross Amount :</label>
                      <input name="totalgrossamt" [(ngModel)]="totalgrossamt"  formControlName="totalgrossamt" class="input_table" type="text" >
                    </td>
                    <td colspan="10">
                      <label class="label_table" for="">Discount Amount :</label>
                      <input name="totaldiscountamt" [(ngModel)]="totaldiscountamt"  formControlName="totaldiscountamt" class="input_table" type="text">
                    </td>
                    <td>
                      <label class="label_table" for="">Tax Amount :</label>
                      <input name="totaltaxamount" [(ngModel)]="totaltaxamount"  formControlName="totaltaxamount" class="input_table" type="text">
                    </td>
                    <td colspan="2">
                      <label class="label_table" for="">Total :</label>
                      <input name="totalnetamount" [(ngModel)]="totalnetamount"  formControlName="totalnetamount" class="input_table" type="text" >
                    </td>
                  </tr>
  
                </table>
              </div>
            </ion-row>

            <ion-row>
              <ion-col  class="row1"  size-lg="3" size-md="3" size-sm="3" size="12">
                <div  class="row3" >
                <ion-label class="delivery-label" style="font-size: small;">Scheduled Delivery</ion-label>
                <div class="outstanding">
                  <ion-row>
                    <table class="delivery-table" style="width: 100%; overflow: hidden;">
                      <tr>
                        <th style="width: 100px !important;">Delivery Date</th>
                        <td>
                          <ion-input type="datetime"  [(ngModel)]="deliverydate"  formControlName="deliverydate" name="deliverydate" placeholder="Enter Delivery Date"></ion-input>
                        </td>
                      </tr>
                      <tr>
                        <th style="width: 100px !important;">Delivery Place</th>
                        <td>
                          <ion-input type="text"  [(ngModel)]="deliveryplace"  formControlName="deliveryplace"  name="deliveryplace" placeholder="Enter Delivery Place"></ion-input>
                        </td>
                      </tr>
                    </table>
                  </ion-row>
                </div>
              </div>
              </ion-col>
  
              <ion-col class="row1"  size-lg="4" size-md="6" size-sm="6" size="12">
                <ion-label class="delivery-label" style="font-size: smaller;">OutStanding</ion-label>
                <div class="outstanding">
                  <ion-row>
                    <table style="width: 100%; overflow: hidden; max-height: 60px;">
                      <tr>
                        <th style="width: 100px !important;">Opening Balance</th>
                        <td>
                          <ion-input type="text"  [(ngModel)]="openingbalance"  formControlName="openingbalance"  name="openingbalance" placeholder="Enter Opening Balance"></ion-input>
                        </td>
                        <th style="width: 100px !important;">Debit</th>
                        <td>
                          <ion-input type="text"  [(ngModel)]="debit"  formControlName="debit"  name="debit" placeholder="Enter  Dedit Amount"></ion-input>
                        </td>
                      </tr>
                      <tr>
                        <th style="width: 100px !important;">Closing Balance</th>
                        <td>
                          <ion-input type="text"  [(ngModel)]="closingbalance"  formControlName="closingbalance" name="closingbalance" placeholder="Enter Closing Balance"></ion-input>
                        </td>
                        <th style="width: 100px !important;">Credit</th>
                        <td>
                          <ion-input type="text"  [(ngModel)]="credit"  formControlName="credit" name="credit" placeholder="Enter Credit Amount"></ion-input>
                        </td>
                      </tr>
                    </table>
                  </ion-row>
                </div>
              </ion-col>
              <ion-col class="row1" size-lg="2" size-md="3" size-sm="3" size="12">
                <!-- <ion-label class="delivery-label" style="font-size: smaller;">Total</ion-label>
                <div class="outstanding">
                  <ion-row>
                    <table style="width: 100%; overflow: hidden; max-height: 60px;">
                      <tr>
                        <th style="text-align: left;">Total Item :</th>
                        <td> <input  [(ngModel)]="totalitemno"  formControlName="totalitemno" name="totalitemno"  class="table_input" type="text">
                        </td>
                      </tr>
                      <tr>
                        <th style="text-align: left;">Total Quantity :</th>
                        <td> <input  [(ngModel)]="totalquantity"  formControlName="totalquantity"  name="totalquantity"  class="table_input" type="text">
                        </td>
                      </tr>
                    </table>
                  </ion-row>
                </div> -->
              </ion-col>

              <ion-col class="row" size-lg="3" size-md="12" size-sm="12" size="12">
                <div class="output">
                  <table style="border: none;margin-left: 25px;">

                    <tr>
                      <th colspan="2">Discount Amount :</th>
                      <td colspan="2"> <input [(ngModel)]="totaldiscountamt"  formControlName="totaldiscountamt" name="totaldiscountamt" class="table_input" type="text">
                      </td>
                    </tr>

                    <tr>
                      <th colspan="2">Tax Amount : </th>
                      <td colspan="2"> <input [(ngModel)]="totaltaxamount"  formControlName="totaltaxamount" name="totaltaxamount" class="table_input" type="text">
                      </td>
                    </tr>

                    <tr>
                      <th colspan="2">Round Off : </th>
                      <td colspan="2"> <input [(ngModel)]="roundoff"  formControlName="roundoff" name="roundoff"  class="table_input" type="text">
                      </td>
                    </tr>
                    <tr>
                      <th colspan="2">Pre-Tax : </th>
                      <td colspan="2"> <input [(ngModel)]="pretax"  formControlName="pretax" name="pretax" class="table_input" type="text">
                      </td>
                    </tr>
                    <tr>
                      <th colspan="2">Post-Tax : </th>
                      <td colspan="2"> <input [(ngModel)]="posttax"  formControlName="posttax" name="posttax" class="table_input" type="text">
                      </td>
                    </tr>

                    <tr>
                      <th colspan="2">Grand Total : </th>
                      <td colspan="2"> <input [(ngModel)]="totalnetamount"  formControlName="totalnetamount" name="totalnetamount" class="table_input" type="text">
                      </td>
                    </tr>
                  </table>
                </div>
              </ion-col>
            </ion-row>
            <ion-row class="custom-primary" style="justify-content: right;margin-top: 10px;">
              <ion-button  id="open-loading">New</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading" message="Cleaning..."
                [duration]="1000"></ion-loading>
              <ion-button type="submit" id="open-loading1">Save</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading1" message="DC-IN Saving..."
                [duration]="1000"></ion-loading>
              
              <ion-button  id="open-loading4">Close</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading4" message="Customer Closing..."
                [duration]="1000"></ion-loading>

            </ion-row>


          </form>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>