<ion-content>
  <div class="Customer">
    <div class="container_fluid">
      <ion-card-content>
        <div class="dekstop-menu">
          <ion-card-header>
            <ion-row lines="none">
              <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
              <ion-title style="text-align: center;">Add Vendor</ion-title>
              <div class="custom-primary">
                <ion-button size="small" [routerLink]="['/viewsupplier']" id="open-loading5">View Vendor</ion-button>
                <ion-loading class="custom-loading" trigger="open-loading5" message="Vendor Showing ..."
                  [duration]="1000"></ion-loading>

              </div>
            </ion-row>
          </ion-card-header>
        </div>
        <ion-grid>

          <form [formGroup]="myform" (ngSubmit)="onSubmit()">

            <ion-row class="headinglabel">
              <ion-label>Contact Information</ion-label>
              <span
                style="width: 100%; height: 2px; background-image: linear-gradient(to right, #00b4db, #0083b0);margin-bottom:5px;"></span>
            </ion-row>

            <ion-row>
              <ion-col size="3" size-lg="2" size-md="2" size-sm="3">
                <ion-row>
                  <select class="select" [(ngModel)]="selectedSalutation" formControlName="selectedSalutation"
                    name="selectedSalutation">
                    <ion-select-option value="">-- Title -- </ion-select-option>
                    <option value="">Mr.</option>
                    <option value="">Mrs.</option>
                    <option value="M/S">M/S</option>
                  </select>
                </ion-row>

              </ion-col>
              <div>
                <ion-col size="9" size-lg="7" size-md="10" size-sm="9">
                  <ion-row style="margin-top: -22px;margin-bottom: 0px;">
                    <ion-input *ngIf="selectedSalutation === 'M/S'" [(ngModel)]="companyName"
                      formControlName="companyName" label-placement="floating" label="Company Name :" fill="outline"
                      name="company_name" color="dark"></ion-input>
                    <!-- <input *ngIf="selectedSalutation === 'M/S'" [(ngModel)]="contactPerson" [ngModelOptions]="{standalone: true}" name="contactPerson" type="text" placeholder="Contact Person" required> -->
                  </ion-row>
                </ion-col>
              </div>
              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input #firstInvalidInput [(ngModel)]="vendor_code" formControlName="vendor_code" type="text"
                    label=" Vendor Code :" label-placement="floating" name="vcode" fill="outline"
                    maxlength="5"></ion-input>

                </ion-row>
              </ion-col>
              <ion-col size="6" size-lg="4" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="name" formControlName="name" type="text" label="Vendor Name :"
                    label-placement="floating" name="customername" fill="outline"></ion-input>
                </ion-row>
              </ion-col>

            </ion-row>
            <ion-row>
              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="gstin" formControlName="gstin" type="text" label=" GSTIN :"
                    label-placement="floating" name="gstincode" fill="outline" maxlength="15"></ion-input>

                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                  label="Vendor Type" label-placement="floating" fill="outline" [(ngModel)]="select_group"
                  formControlName="select_group" name="select_group">
                  <!-- <ion-select-option value="0"> -Customer Type- </ion-select-option> -->
                  <ion-select-option *ngFor="let custtype of custtype$ | async" [value]="custtype.customertypeid">
                    {{ custtype.customertypename }}
                  </ion-select-option>
                </ion-select>
              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                    label="Default Discount" label-placement="floating" fill="outline" [(ngModel)]="discount"
                    formControlName="discount" name="discount">
                    <ion-select-option value="0">0%</ion-select-option> <!-- Default option -->
                    <ion-select-option value="5">5%</ion-select-option>
                    <ion-select-option value="8">8%</ion-select-option>
                    <ion-select-option value="10">10%</ion-select-option>
                    <ion-select-option value="12">12%</ion-select-option>
                    <ion-select-option value="15">15%</ion-select-option>
                    <ion-select-option value="18">15%</ion-select-option>
                    <ion-select-option value="20">20%</ion-select-option>
                    <ion-select-option value="25">25%</ion-select-option>
                    <ion-select-option value="50">50%</ion-select-option>
                    <ion-select-option value="70">70%</ion-select-option>
                    <ion-select-option value="90">90%</ion-select-option>
                  </ion-select>
                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="opening_balance" formControlName="opening_balance" type="number"
                    label=" Opening Balance :" label-placement="floating" name="openbal" fill="outline"
                    (keydown)="onKeyDown($event)"></ion-input>
                </ion-row>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="closing_balance" formControlName="closing_balance" type="number"
                    label=" Closing Balance :" label-placement="floating" name="closingbal" fill="outline"
                    (keydown)="onKeyDown($event)"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="2.8" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="mobile" formControlName="mobile" type="tel" label=" Mobile Number :"
                    label-placement="floating" name="phonenumber" fill="outline" maxlength="10"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col style="display: flex;justify-content: center;align-items: center;" size="6" size-lg="0.3"
                size-md="6" size-sm="6">
                <ion-row>
                  <ion-checkbox [(ngModel)]="phoneData" formControlName="phoneData"
                    (ionChange)="onWhatshappCheck()"></ion-checkbox>
                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="2.9" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="whatsapp_number" formControlName="whatsapp_number" type="text"
                    label=" Whatsapp Number :" label-placement="floating" name="wpnumber" fill="outline"
                    maxlength="10"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col size="12" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="email" formControlName="email" type="email" label="Email :"
                    label-placement="floating" name="emails" fill="outline"></ion-input>
                </ion-row>

              </ion-col>
              <div style="margin-top: 5px;font-size: 18px;">
                <ion-toggle [(ngModel)]="paymentMethod" formControlName="paymentMethod">Payment made By BillWise</ion-toggle> Payment Transfer in
                Account
              </div>
            </ion-row>

            <ion-row>

              <ion-col size="12" size-lg="12" size-md="6" size-sm="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                      <ion-label style="font-size: 14px;">Billing Address</ion-label>

                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-bottom: -10px;margin-top: -10px;">
                      <ion-row>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="country" formControlName="country" name="selectedCountry"
                            label-placement="floating" fill="outline" (change)="onCountryChange()">
                            <option value="0"> --- Country --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let country of (countries$ | async)" [value]="country.countryid">
                              {{ country.countryname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="state" formControlName="state" name="selectedState"
                            label-placement="floating" (change)="onStateChange()">
                            <option value="0"> --- State --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let state of (states$ | async)" [value]="state.stateid">
                              {{ state.statename }}
                            </option>
                          </select>

                        </ion-col>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">

                          <select class="select" [(ngModel)]="district" formControlName="district"
                            name="selectedDistrict" label-placement="floating" fill="outline">
                            <option value="0"> --- District --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let district of (districts$ | async)" [value]="district.districtid">
                              {{ district.districtname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pincode" formControlName="pincode" type="text" label=" PinCode  :"
                              label-placement="floating" name="pcode" fill="outline" inputmode="numeric"
                              maxlength="6"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                      <ion-row style="margin-top: 5px;">
                        <ion-col size="12" size-lg="12" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="address" formControlName="address" type="text"
                              label="Full Address :" label-placement="floating" name="fname" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>

              <ion-col size="12" size-lg="12" size-md="6" size-sm="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                      <ion-label style="font-size: 14px;">Shopping Address</ion-label>
                      <ion-checkbox [(ngModel)]="copyData" formControlName="copyData" (ionChange)="onCopyboxChange()">
                      </ion-checkbox>
                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-bottom: -10px;margin-top: -10px;">

                      <ion-row>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="country1" formControlName="country1"
                            name="selectedCountry1" label-placement="floating" fill="outline"
                            (change)="onCountryChange()">
                            <option value="0"> --- Country --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let country of (countries$ | async)" [value]="country.countryid">
                              {{ country.countryname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="state1" formControlName="state1" name="selectedState1"
                            label-placement="floating" (change)="onStateChange()">
                            <option value="0"> --- State --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let state of (states$ | async)" [value]="state.stateid">
                              {{ state.statename }}
                            </option>
                          </select>

                        </ion-col>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">

                          <select class="select" [(ngModel)]="district1" formControlName="district1"
                            name="selectedDistrict1" label-placement="floating" fill="outline">
                            <option value="0"> --- District --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let district of (districts$ | async)" [value]="district.districtid">
                              {{ district.districtname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pincode1" formControlName="pincode1" type="number"
                              label=" PinCode  :" label-placement="floating" name="pcode" fill="outline"
                              inputmode="numeric" maxlength="6"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                      <ion-row style="margin-top: 5px;">
                        <ion-col size="12" size-lg="12" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="address1" formControlName="address1" type="text"
                              label="Full Address :" label-placement="floating" name="address"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col size="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                      <ion-label style="font-size: 14px;">Bank Details</ion-label>

                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-bottom: -10px;margin-top: -10px;">
                      <ion-row>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="tdn" formControlName="tdn" type="text" label=" Tax Deducation No. :"
                              label-placement="floating" name="taxsnumber" fill="outline" maxlength="10"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="aadhar_no" formControlName="aadhar_no" type="tel"
                              label="Aadhar No.:" label-placement="floating" name="adharnumbers" fill="outline"
                              maxlength="12"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pan_no" formControlName="pan_no" type="text" label=" PAN No. :"
                              label-placement="floating" name="pansnumber" fill="outline" maxlength="10"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="udhyog_aadhar" formControlName="udhyog_aadhar" type="text"
                              label=" Udayog Aadhar No. :" label-placement="floating" name="unumber" maxlength="12"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>

              <ion-col size="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                      <ion-label style="font-size: 14px;">Registration</ion-label>

                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-bottom: -10px;margin-top: -10px;">
                      <ion-row>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="account_number" formControlName="account_number" type="tel"
                              maxlength="14" label="A/C Number :" label-placement="floating" name="acnumber"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="ifsc_code" formControlName="ifsc_code" type="text"
                              label="IFSC Code :" label-placement="floating" name="ifscode" fill="outline"
                              maxlength="11"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="bank_name" formControlName="bank_name" type="text"
                              label="Bank Name :" label-placement="floating" name="bname" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="branch_name" formControlName="branch_name" type="text"
                              label=" Branch Name :" label-placement="floating" name="brname"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>

            </ion-row>
            <ion-row>
              <ion-col size="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                      <ion-label style="font-size: 14px;">Other Detials</ion-label>

                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-bottom: -10px;margin-top: -10px;">

                      <ion-row>
                        <ion-col size="6" size-lg="4" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="credit_period" formControlName="credit_period" type="number"
                              label=" Credit Period :" name="cperiod" label-placement="floating" fill="outline"
                              (keydown)="onKeyDown($event)"></ion-input>
                          </ion-row>
                        </ion-col>
                        <ion-col size="6" size-lg="4" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="credit_limit" formControlName="credit_limit" type="number"
                              label=" Credit Limit :" label-placement="floating" name="climit" fill="outline"
                              (keydown)="onKeyDown($event)"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3.5" size-md="6" size-sm="6">
                          <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                            label=" --- Executive Name ---" label-placement="floating" fill="outline"
                            [(ngModel)]=" select_sales_person" formControlName="select_sales_person"
                            name="select_sales_person">
                            <!-- <option value="0">  --- Executive Name ---  </option>Default option -->
                            <ion-select-option *ngFor="let executive of executive$ | async"
                              [value]="executive.executivename">
                              {{ executive.executivename }}
                            </ion-select-option>
                          </ion-select>
                        </ion-col>

                        <ion-col class="custom-primary" size-lg="0.5" size-md="2" size-sm="2" size="2">
                          <ion-button id="vendor" (click)="presentPopovers($event)"><ion-icon
                              name="person-add-outline"></ion-icon></ion-button>
                        </ion-col>

                        <ion-col size="6" size-lg="4" size-md="4" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="card_number" formControlName="card_number" type="text"
                              label=" Card Number :" label-placement="floating" name="cardsnumber"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="4" size-md="4" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="opening_point" formControlName="opening_point" type="number"
                              label="Opening Point :" label-placement="floating" name="openpoint" fill="outline"
                              (keydown)="onKeyDown($event)"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="4" size-md="4" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="closing_point" formControlName="closing_point" type="number"
                              label="Closing Point :" label-placement="floating" name="closepoint" fill="outline"
                              (keydown)="onKeyDown($event)"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>
            </ion-row>

            <ion-row class="custom-primary" style="justify-content: right;">
              <ion-button id="open-loading" (click)="onNew()">New</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading" message="Cleaning..."
                [duration]="1000"></ion-loading>
              <ion-button type="submit">Save</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading1" message="Vendor Adding..."
                [duration]="1000"></ion-loading>
              <ion-button id="open-loading4" (click)="onButtonClick()">Close</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading4" message="Customer Closing..."
                [duration]="1000"></ion-loading>

            </ion-row>
          </form>

        </ion-grid>
      </ion-card-content>
    </div>
    <!-- </ion-card> -->
  </div>
</ion-content>

<ion-popover trigger="vendor" #popover [isOpen]="isOpen" (didDismiss)="isOpen = false" side="top" alignment="end">

  <ng-template style="margin-right: 200px;">
    <div style="margin: 10px;">
      <ion-content class="ion-padding Customer ">
        <ion-row style="justify-content: center;margin-bottom: 10px;">
          <ion-label class="executive">Add Executive</ion-label>
        </ion-row>
        <form [formGroup]="executivepop" (ngSubmit)="OnExecutiveSubmit()">
          <ion-row>

            <ion-col size="12" size-lg="6" size-md="6" size-sm="12">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="--- Role---" label-placement="floating" fill="outline" [ngModel]="roleid" name="roleid"
                formControlName="roleid">
                <!-- <ion-select-option value="0"><ion-button>add</ion-button></ion-select-option>  -->
                <ion-select-option *ngFor="let roletypes of roletypes$ | async" [value]="roletypes.roletypeid">
                  {{ roletypes.roletypename }}
                </ion-select-option>

              </ion-select>

            </ion-col>
            <ion-col size="12" size-lg="6" size-md="6" size-sm="12">
              <ion-row>
                <ion-input [ngModel]="excode" formControlName="excode" name="excode" type="text"
                  label=" Executive Code :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="12" size-lg="6" size-md="6" size-sm="12">
              <ion-row>
                <ion-input [ngModel]="executivename" formControlName="executivename" name="executivename" type="text"
                  label=" Name :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
            <ion-col size="12" size-lg="6" size-md="6" size-sm="12">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="---Select Ledger ---" label-placement="floating" fill="outline" [ngModel]="ledger"
                formControlName="ledger" name="ledger">
                <!-- <ion-select-option value="" disabled selected> --- ledger --- </ion-select-option> Default option -->
                <ion-select-option *ngFor="let ledger of ledgers$ | async; let i = index">{{ledger.lname}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="12" size-lg="6" size-md="6" size-sm="12">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="--- Manager ---" label-placement="floating" fill="outline" [ngModel]="emanager"
                formControlName="emanager" name="emanager">
                <!-- <ion-select-option value="" disabled selected> --- Manager --- </option> Default option -->
                <ion-select-option value="1">Deepak</ion-select-option>
                <ion-select-option value="1">Yogesh</ion-select-option>
                <ion-select-option value="1">Abhishek</ion-select-option>
                <ion-select-option value="1">Nirbhay</ion-select-option>
                <ion-select-option value="1">Ravi</ion-select-option>
              </ion-select>

            </ion-col>

            <ion-col size="6" size-lg="6" size-md="6" size-sm="12">
              <ion-row>
                <ion-input [ngModel]="emobile" maxlength="10" formControlName="emobile" name="emobile" type="tel"
                  label="Mobile No. :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
          </ion-row>

          <ion-row style="float: right;margin-top: 23px;">
            <ion-button type="submit">Save</ion-button>
            <ion-button (click)="closePopover()">Close</ion-button>
          </ion-row>
        </form>
      </ion-content>
    </div>
  </ng-template>

</ion-popover>