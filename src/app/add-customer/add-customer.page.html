<ion-content>
  <div class="Customer" style="background-color: #ffffff;height: 100vh;">
    <div class="container_fluid">
      <ion-card-content>

        <div class="dekstop-menu">
          <ion-card-header>
            <ion-row lines="none">
              <ion-icon (click)="goBack()" class="back" name="arrow-back"></ion-icon>
              <ion-title style="text-align: center;">Add Customer</ion-title>
              <div class="custom-primary">
                <ion-button size="small" [routerLink]="['/viewcustomer']" id="open-loading5">View Customer</ion-button>
                <ion-loading class="custom-loading" trigger="open-loading5" message="Customer Showing ..."
                  [duration]="1000"></ion-loading>

              </div>
            </ion-row>
          </ion-card-header>
        </div>
        <ion-grid>

          <ion-row class="headinglabel">
            <ion-label>Contact Information :</ion-label><span style="width: 100%; height: 2px; background-image: linear-gradient(to right, #00b4db, #0083b0);
            "></span>
          </ion-row>
          <form [formGroup]="myform" (ngSubmit)="onSubmit()">
            <ion-row>
              <ion-col size="3" size-lg="2" size-md="2" size-sm="3">
                <ion-row>
                  <select class="select" [(ngModel)]="selectedSalutation" formControlName="selectedSalutation"
                    name="selectedSalutation">
                    <ion-select-option value="">-- Title -- </ion-select-option>
                    <option value="">Mr.</option>
                    <option value="">Mrs.</option>
                    <option value="M/S">M/S</option>
                  </select>
                </ion-row>

              </ion-col>

              <div>
                <ion-col size="9" size-lg="7" size-md="10" size-sm="9">
                  <ion-row style="margin-top: -22px;margin-bottom: 0px;">
                    <ion-input *ngIf="selectedSalutation === 'M/S'" [(ngModel)]="companyName"
                      formControlName="companyName" label-placement="floating" label="Company Name :" fill="outline"
                      name="companyName" required></ion-input>
                  </ion-row>
                </ion-col>
              </div>

              <ion-col size="6" size-lg="2" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="customer_code" formControlName="customer_code" name="customer_code"
                    type="text" label=" Customer Code :" label-placement="floating" fill="outline"
                    maxlength="5"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col size="12" size-lg="5" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input #firstInvalidInput [(ngModel)]="name" formControlName="name" name="name" type="text"
                    label="Customer Name :" label-placement="floating" fill="outline" color="dark"
                    class="sign_input"></ion-input>
                </ion-row>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="gstin" formControlName="gstin" name="gstin" type="text" label=" GSTIN :"
                    label-placement="floating" fill="outline" maxlength="15"></ion-input>
                </ion-row>
              </ion-col>
              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <!-- <label for="">Customer Type</label> -->
                <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                  label="Customer Type" label-placement="floating" fill="outline" [(ngModel)]="select_group"
                  formControlName="select_group" name="select_group">
                  <!-- <ion-select-option value="0"> -Customer Type- </ion-select-option> -->
                  <ion-select-option *ngFor="let custtype of custtype$ | async" [value]="custtype.customertypeid">
                    {{ custtype.customertypename }}
                  </ion-select-option>
                </ion-select>
              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                    label="Default Discount" label-placement="floating" fill="outline" [(ngModel)]="discount"
                    formControlName="discount" name="discount">
                    <ion-select-option value="0">0%</ion-select-option> <!-- Default option -->
                    <ion-select-option value="5">5%</ion-select-option>
                    <ion-select-option value="8">8%</ion-select-option>
                    <ion-select-option value="10">10%</ion-select-option>
                    <ion-select-option value="12">12%</ion-select-option>
                    <ion-select-option value="15">15%</ion-select-option>
                    <ion-select-option value="18">15%</ion-select-option>
                    <ion-select-option value="20">20%</ion-select-option>
                    <ion-select-option value="25">25%</ion-select-option>
                    <ion-select-option value="50">50%</ion-select-option>
                    <ion-select-option value="70">70%</ion-select-option>
                    <ion-select-option value="90">90%</ion-select-option>
                  </ion-select>

                </ion-row>

              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="opening_balance" formControlName="opening_balance" name="opening_balance"
                    class="sign_input" type="number" label=" Opening Balance :" label-placement="floating"
                    fill="outline" (keydown)="onKeyDown($event)"></ion-input>

                </ion-row>
              </ion-col>
            </ion-row>
            <ion-row>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="closing_balance " formControlName="closing_balance" name="closing_balance"
                    type="number" label=" Closing Balance :" label-placement="floating" fill="outline" (keydown)="onKeyDown($event)"></ion-input>

                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="mobile" formControlName="mobile" name="mobile" type="text"
                    label=" Mobile Number:" label-placement="floating" fill="outline" maxlength="10"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col style="display: flex;justify-content: center;align-items: center;" size="6" size-lg="0.3"
                size-md="6" size-sm="2">
                <ion-row>
                  <ion-checkbox [(ngModel)]="phoneData" formControlName="phoneData"
                    (ionChange)="onWhatshappCheck()"></ion-checkbox>
                </ion-row>
              </ion-col>

              <ion-col size="6" size-lg="2.7" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="whatsapp_number" formControlName="whatsapp_number" name="whatsapp_number"
                    type="text" label=" Whatsapp Number :" label-placement="floating" fill="outline"
                    maxlength="10"></ion-input>
                </ion-row>
              </ion-col>

              <ion-col size="12" size-lg="3" size-md="6" size-sm="6">
                <ion-row>
                  <ion-input [(ngModel)]="email" formControlName="email" name="email" type="email" label="Email :"
                    label-placement="floating" fill="outline"></ion-input>
                </ion-row>
              </ion-col>
              <div style="margin-top: 5px;font-size: 18px;">
                <ion-toggle [(ngModel)]="paymentMethod" formControlName="paymentMethod" name="paymentMethod">Payment made By BillWise</ion-toggle> Payment Transfer in Account
              </div>
            
            </ion-row>

            <ion-row>

              <ion-accordion-group style="width: 100%;margin-top: 10px;">
                <ion-accordion value="second">
                  <ion-item slot="header" color="primary" style="height: 40px;padding: 0;">
                    <ion-label style="font-size: 14px;">Billing Address</ion-label>

                  </ion-item>
                  <div class="ion-padding" slot="content" style="margin-top: -30px;margin-bottom: -35px;">
                    <ion-col size-lg="12" size="12">

                      <ion-row>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="12">
                          <select class="select" [(ngModel)]="country" formControlName="country" name="country"
                            label-placement="floating" fill="outline" (change)="onCountryChange()">
                            <option value="0"> --- Country --- </option>
                            <option *ngFor="let country of countries$ | async" [value]="country.countryid">
                              {{ country.countryname }}
                            </option>

                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="state" formControlName="state" name="state"
                            label-placement="floating" fill="outline" (change)="onStateChange()">
                            <option value="0"> --- State --- </option>
                            <option *ngFor="let state of (states$ | async)" [value]="state.stateid">
                              {{ state.statename }}
                            </option>
                          </select>
                        </ion-col>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="district" formControlName="district" name="district"
                            label-placement="floating" fill="outline">
                            <option value="0"> --- District --- </option>
                            <option *ngFor="let district of districts$ | async" [value]="district.districtid">
                              {{ district.districtname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pincode" formControlName="pincode" type="tel" name="pincode"
                              label=" PinCode  :" label-placement="floating" fill="outline" maxlength="6"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>

                      <ion-row style="margin-top: 5px;">
                        <ion-col size="12" size-lg="12" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="address" formControlName="address" name="address" type="text"
                              label="Full Address :" label-placement="floating" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </ion-col>
                  </div>
                </ion-accordion>
              </ion-accordion-group>

              <ion-accordion-group style="width: 100%;margin-top: 10px;">
                <ion-accordion value="second">
                  <ion-item slot="header" color="primary" style="height: 40px;padding: 0;"> <ion-label
                      style="font-size: 14px;">Shipping Address</ion-label>

                    <ion-checkbox placeholder="Same" [(ngModel)]="copyData" formControlName="copyData"
                      (ionChange)="onCopyboxChange()"> </ion-checkbox>

                  </ion-item>
                  <div class="ion-padding" slot="content" style="margin-top: -30px;margin-bottom: -35px;">
                    <ion-col size-lg="12" size="12">

                      <ion-row>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="12">
                          <select class="select" [(ngModel)]="selectedOption1" formControlName="selectedOption1"
                            name="country1" label-placement="floating" fill="outline" (change)="onCountryChange()">
                            <option value="0"> --- Country --- </option>
                            <option *ngFor="let country of countries$ | async" [value]="country.countryid">
                              {{ country.countryname }}
                            </option>

                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="selectedState1" formControlName="selectedState1"
                            name="state1" label-placement="floating" fill="outline" (change)="onStateChange()">
                            <option value="0"> --- State --- </option>
                            <option *ngFor="let state of (states$ | async)" [value]="state.stateid">
                              {{ state.statename }}
                            </option>
                          </select>
                        </ion-col>
                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <select class="select" [(ngModel)]="selectedDistrict1" formControlName="selectedDistrict1"
                            name="district1" label-placement="floating" fill="outline">
                            <option value="0"> --- District --- </option> <!-- Default option with value 0 -->
                            <option *ngFor="let district of districts$ | async" [value]="district.districtid">
                              {{ district.districtname }}
                            </option>
                          </select>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pincode1" formControlName="pincode1" type="tel" name="pincode1"
                              label=" PinCode  :" label-placement="floating" fill="outline" maxlength="6"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>

                      <ion-row style="margin-top: 5px;">
                        <ion-col size="12" size-lg="12" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="address1" formControlName="address1" name="address1" type="text"
                              label="Full Address :" label-placement="floating" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>
                      </ion-row>

                    </ion-col>

                  </div>
                </ion-accordion>
              </ion-accordion-group>
            </ion-row>

            <ion-row>
              <ion-accordion-group style="width: 100%;margin-top: 10px;">
                <ion-accordion value="second">
                  <ion-item slot="header" color="primary" style="height: 40px;padding: 0;"> <ion-label
                      style="font-size: 14px;">Registration Details</ion-label>

                  </ion-item>
                  <div class="ion-padding" slot="content" style="margin-top: -30px;margin-bottom: -35px;">
                    <ion-col size-lg="12" size="12">

                      <ion-row>

                        <ion-col size="6" size-lg="3.5" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="tdn" formControlName="tdn" name="tdn" type="text" maxlength="10"
                              label="Tax Deducation No. :" label-placement="floating" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="2.5" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="aadhar_no" formControlName="aadhar_no" name="aadhar_no" type="tel"
                              label="Aadhar No.:" label-placement="floating" fill="outline" maxlength="12"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="2.5" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="pan_no" formControlName="pan_no" name="pan_no" type="text"
                              label="PAN No. :" label-placement="floating" fill="outline" maxlength="10"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3.5" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="udhyog_aadhar" formControlName="udhyog_aadhar" name="udhyog_aadhar"
                              type="text" label="Udayog Aadhar No. :" label-placement="floating" fill="outline"
                              maxlength="12"></ion-input>
                          </ion-row>
                        </ion-col>

                      </ion-row>
                    </ion-col>
                  </div>
                </ion-accordion>
              </ion-accordion-group>

              <ion-col size-lg="12" size="12">
                <ion-accordion-group style="width: 100%;margin-top: 10px;">
                  <ion-accordion value="second">
                    <ion-item slot="header" color="primary" style="height: 40px;padding: 0;"> <ion-label
                        style="font-size: 14px;">Bank Details</ion-label>

                    </ion-item>
                    <div class="ion-padding" slot="content" style="margin-top: -10px;margin-bottom: -15px;">
                      <ion-row>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="account_number" formControlName="account_number"
                              name="account_number" type="text" label="A/C Number :" label-placement="floating"
                              fill="outline" maxlength="14"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="6" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="ifsc_code" formControlName="ifsc_code" name="ifsc_code" type="text"
                              label="IFSC Code :" label-placement="floating" fill="outline" maxlength="11"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="12" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="bank_name" formControlName="bank_name" class="bank_name"
                              name="bank_name" type="text" label="Bank Name :" label-placement="floating"
                              fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                        <ion-col size="12" size-lg="3" size-md="6" size-sm="6">
                          <ion-row>
                            <ion-input [(ngModel)]="branch_name" formControlName="branch_name" name="branch_name"
                              type="text" label=" Branch Name :" label-placement="floating" fill="outline"></ion-input>
                          </ion-row>
                        </ion-col>

                      </ion-row>
                    </div>
                  </ion-accordion>
                </ion-accordion-group>
              </ion-col>

            </ion-row>

            <ion-row>
              <ion-accordion-group style="width: 100%;margin-top: 10px;">
                <ion-accordion value="second">
                  <ion-item slot="header" color="primary" style="height: 40px;padding: 0;"> <ion-label
                      style="font-size: 14px;">Other Details</ion-label>

                  </ion-item>
                  <div class="ion-padding" slot="content" style="margin-top: -10px;">

                    <ion-row>

                      <ion-col size-lg="4" size-md="6" size-sm="6" size="6">
                        <ion-row>
                          <ion-input [(ngModel)]="credit_period" formControlName="credit_period" name="credit_period"
                            type="tel" label=" Credit Period :" label-placement="floating" fill="outline"></ion-input>
                        </ion-row>
                      </ion-col>

                      <ion-col size-lg="4" size-md="6" size-sm="6" size="6">
                        <ion-row>
                          <ion-input [(ngModel)]="credit_limit" formControlName="credit_limit" name="credit_limit"
                            type="text" label=" Credit Limit :" label-placement="floating" fill="outline"></ion-input>
                        </ion-row>
                      </ion-col>

                      <ion-col size-lg="3.5" size-md="4" size-sm="4" size="6">
                        <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                          label=" --- Executive Name ---" label-placement="floating" fill="outline"
                          [(ngModel)]=" select_sales_person" formControlName="select_sales_person"
                          name="select_sales_person">
                          <ion-select-option *ngFor="let executive of executive$ | async"
                            [value]="executive.executivename">
                            {{ executive.executivename }}
                          </ion-select-option>
                        </ion-select>
                      </ion-col>

                      <ion-col class="custom-primary" size-lg="0.5" size-md="2" size-sm="2" size="2">
                        <ion-button id="customer"><ion-icon name="person-add-outline"></ion-icon></ion-button>
                      </ion-col>

                    </ion-row>

                    <ion-row>

                      <ion-col size-lg="4" size-md="6" size-sm="6" size="6">
                        <ion-row>
                          <ion-input [(ngModel)]="card_number" formControlName="card_number" name="card_number"
                            type="text" label=" Card Number :" label-placement="floating" fill="outline"></ion-input>
                        </ion-row>
                      </ion-col>

                      <ion-col size-lg="4" size-md="6" size-sm="6" size="6">
                        <ion-row>
                          <ion-input [(ngModel)]="opening_point" formControlName="opening_point" name="opening_point"
                            type="text" label="Opening Point :" label-placement="floating" fill="outline"></ion-input>
                        </ion-row>

                      </ion-col>
                      <ion-col size-lg="4" size-md="6" size-sm="6" size="6">
                        <ion-row>
                          <ion-input [(ngModel)]="closing_point" formControlName="closing_point" name="closing_point"
                            type="text" label="Closing Point :" label-placement="floating" fill="outline"></ion-input>
                        </ion-row>
                      </ion-col>

                    </ion-row>
                  </div>
                </ion-accordion>
              </ion-accordion-group>
            </ion-row>

            <ion-row class="custom-primary" style="justify-content: right;margin-top: 5px;">
              <ion-button id="open-loading" (click)="onNew()">New</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading" message="Cleaning..."
                [duration]="1000"></ion-loading>
              <ion-button type="submit" id="open-loading1">Save</ion-button>

              <ion-button id="open-loading4" (click)="onButtonClick()">Close</ion-button>
              <ion-loading class="custom-loading" trigger="open-loading4" message="Customer Closing..."
                [duration]="1000"></ion-loading>

            </ion-row>
          </form>

        </ion-grid>
      </ion-card-content>
    </div>
  </div>
</ion-content>

<ion-popover trigger="customer" side="top" alignment="end">

  <ng-template style="margin-right: 200px;">
    <div style="margin: 10px;">
      <ion-content class="ion-padding Customer ">
        <ion-row style="justify-content: center;margin-bottom: 10px;">
          <ion-label class="executive">Add Executive</ion-label>
        </ion-row>
        <form [formGroup]="executivepop" (ngSubmit)="OnExecutiveSubmit()">
          <ion-row>

            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="--- Role---" label-placement="floating" fill="outline" [ngModel]="roleid" name="roleid"
                formControlName="roleid">
                <!-- <ion-select-option value="0"><ion-button>add</ion-button></ion-select-option>  -->
                <ion-select-option *ngFor="let roletypes of roletypes$ | async" [value]="roletypes.roletypeid">
                  {{ roletypes.roletypename }}
                </ion-select-option>

              </ion-select>

            </ion-col>
            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-row>
                <ion-input [ngModel]="excode" formControlName="excode" name="excode" type="text"
                  label=" Executive Code :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-row>
                <ion-input [ngModel]="executivename" formControlName="executivename" name="executivename" type="text"
                  label=" Name :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="---Select Ledger ---" label-placement="floating" fill="outline" [ngModel]="ledger"
                formControlName="ledger" name="ledger">
                <!-- <ion-select-option value="" disabled selected> --- ledger --- </ion-select-option> Default option -->
                <ion-select-option *ngFor="let ledger of ledgers$ | async; let i = index">{{ledger.lname}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-select class="always-flip" toggleIcon="caret-down-sharp" color="dark" interface="popover"
                label="--- Manager ---" label-placement="floating" fill="outline" [ngModel]="emanager"
                formControlName="emanager" name="emanager">
                <!-- <ion-select-option value="" disabled selected> --- Manager --- </option> Default option -->
                <ion-select-option value="1">Deepak</ion-select-option>
                <ion-select-option value="1">Yogesh</ion-select-option>
                <ion-select-option value="1">Abhishek</ion-select-option>
                <ion-select-option value="1">Nirbhay</ion-select-option>
                <ion-select-option value="1">Ravi</ion-select-option>
              </ion-select>

            </ion-col>

            <ion-col size="6" size-lg="6" size-md="6" size-sm="6">
              <ion-row>
                <ion-input [ngModel]="emobile" maxlength="10" formControlName="emobile" name="emobile" type="tel"
                  label="Mobile No. :" label-placement="floating" fill="outline"></ion-input>

              </ion-row>
            </ion-col>
          </ion-row>

          <ion-row style="float: right;margin-top: 23px;">
            <ion-button type="submit">Save</ion-button>
            <ion-button (click)="closePopover()">Close</ion-button>
          </ion-row>
        </form>
      </ion-content>
    </div>
  </ng-template>

</ion-popover>